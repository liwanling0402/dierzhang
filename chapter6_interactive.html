<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬å…­ç« ï¼šåæ ‡è½´ - äº¤äº’å¼æ•°æ®å¯è§†åŒ–å¹³å°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.0/dist/chartjs-plugin-zoom.min.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        .glass-morphism {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .nav-item {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .nav-item:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .nav-item.active {
            background: rgba(255, 255, 255, 0.4);
            border-bottom: 3px solid #fff;
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 20px;
            margin: 10px 0;
        }
        
        .control-btn {
            transition: all 0.3s ease;
        }
        
        .control-btn:hover {
            transform: scale(1.05);
        }
        
        .dark-theme {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        }
        
        .dark-theme .chart-container {
            background: rgba(0, 0, 0, 0.7);
            color: white;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 20px;
            border-radius: 10px;
            width: 80%;
            max-width: 600px;
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            color: #000;
        }
        
        .knowledge-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .info-card {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .axis-example {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="min-h-screen p-4">
        <!-- å¤´éƒ¨å¯¼èˆª -->
        <header class="glass-morphism rounded-xl p-6 mb-6 text-white">
            <div class="container mx-auto">
                <div class="flex justify-between items-center mb-4">
                    <div>
                        <h1 class="text-3xl font-bold mb-2">ç¬¬å…­ç« ï¼šåæ ‡è½´</h1>
                        <p class="text-lg opacity-90">åæ ‡è½´å®šåˆ¶ä¸è½´è„Šæ§åˆ¶æŠ€æœ¯</p>
                    </div>
                    <div class="flex space-x-2">
                        <button id="fullscreenBtn" class="control-btn bg-white/20 hover:bg-white/30 p-3 rounded-lg" title="å…¨å±">
                            ğŸ”³
                        </button>
                        <button id="themeBtn" class="control-btn bg-white/20 hover:bg-white/30 p-3 rounded-lg" title="åˆ‡æ¢ä¸»é¢˜">
                            ğŸŒ™
                        </button>
                    </div>
                </div>
                
                <!-- å¯¼èˆªèœå• -->
                <nav class="flex space-x-1 overflow-x-auto">
                    <div class="nav-item active px-4 py-2 rounded-lg text-white font-medium" data-module="overview">
                        ğŸ“Š åæ ‡è½´æ¦‚è¿°
                    </div>
                    <div class="nav-item px-4 py-2 rounded-lg text-white font-medium" data-module="position">
                        ğŸ“ ä»»æ„ä½ç½®æ·»åŠ åæ ‡è½´
                    </div>
                    <div class="nav-item px-4 py-2 rounded-lg text-white font-medium" data-module="shenzhen">
                        ğŸŒŠ æ·±åœ³é£é€Ÿåˆ†æ
                    </div>
                    <div class="nav-item px-4 py-2 rounded-lg text-white font-medium" data-module="trigonometric">
                        ğŸ“ˆ æ­£å¼¦ä½™å¼¦æ›²çº¿
                    </div>
                    <div class="nav-item px-4 py-2 rounded-lg text-white font-medium" data-module="spine">
                        ğŸ›ï¸ è½´è„Šæ§åˆ¶
                    </div>
                </nav>
            </div>
        </header>

        <!-- ä¸»å†…å®¹åŒº -->
        <main class="container mx-auto">
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                <!-- å·¦ä¾§çŸ¥è¯†é¢æ¿ -->
                <aside class="lg:col-span-1">
                    <div class="glass-morphism rounded-xl p-4 text-white">
                        <h2 class="text-xl font-bold mb-4">ğŸ’¡ çŸ¥è¯†è¦ç‚¹</h2>
                        
                        <div id="knowledgeContent" class="knowledge-panel">
                            <!-- åŠ¨æ€çŸ¥è¯†å†…å®¹ -->
                        </div>
                        
                        <div class="mt-4 space-y-2">
                            <div class="info-card">
                                <h3 class="font-semibold mb-1">ğŸ“š ç« èŠ‚é‡ç‚¹</h3>
                                <ul class="text-sm space-y-1">
                                    <li>â€¢ åæ ‡è½´åŸºæœ¬ç»“æ„</li>
                                    <li>â€¢ ä»»æ„ä½ç½®åˆ›å»ºåæ ‡è½´</li>
                                    <li>â€¢ åˆ»åº¦å®šåˆ¶æŠ€æœ¯</li>
                                    <li>â€¢ è½´è„Šéšè—ä¸ç§»åŠ¨</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- ä¸­é—´å›¾è¡¨åŒºåŸŸ -->
                <section class="lg:col-span-2">
                    <div class="glass-morphism rounded-xl p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h2 id="chartTitle" class="text-2xl font-bold text-white">åæ ‡è½´æ¦‚è¿°</h2>
                            <div class="flex space-x-2">
                                <button id="exportBtn" class="control-btn bg-green-500/80 hover:bg-green-600/80 text-white px-3 py-1 rounded-lg text-sm">
                                    ğŸ“¸ å¯¼å‡º
                                </button>
                                <button id="resetBtn" class="control-btn bg-blue-500/80 hover:bg-blue-600/80 text-white px-3 py-1 rounded-lg text-sm">
                                    ğŸ”„ é‡ç½®
                                </button>
                            </div>
                        </div>
                        
                        <!-- å›¾è¡¨å®¹å™¨ -->
                        <div id="chartArea" class="chart-container">
                            <canvas id="mainChart"></canvas>
                        </div>
                        
                        <!-- æ§åˆ¶é¢æ¿ -->
                        <div class="mt-4 flex flex-wrap gap-2">
                            <button id="playBtn" class="control-btn bg-purple-500/80 hover:bg-purple-600/80 text-white px-3 py-1 rounded-lg text-sm">
                                â¸ï¸ æš‚åœåˆ‡æ¢
                            </button>
                            <button id="gridBtn" class="control-btn bg-indigo-500/80 hover:bg-indigo-600/80 text-white px-3 py-1 rounded-lg text-sm">
                                ğŸ“ æ˜¾ç¤ºç½‘æ ¼
                            </button>
                            <button id="zoomInBtn" class="control-btn bg-yellow-500/80 hover:bg-yellow-600/80 text-white px-3 py-1 rounded-lg text-sm">
                                ğŸ” æ”¾å¤§
                            </button>
                            <button id="zoomOutBtn" class="control-btn bg-yellow-500/80 hover:bg-yellow-600/80 text-white px-3 py-1 rounded-lg text-sm">
                                ğŸ” ç¼©å°
                            </button>
                        </div>
                    </div>
                </section>

                <!-- å³ä¾§æ•°æ®é¢æ¿ -->
                <aside class="lg:col-span-1">
                    <div class="glass-morphism rounded-xl p-4 text-white">
                        <h2 class="text-xl font-bold mb-4">ğŸ“Š æ•°æ®åˆ†æ</h2>
                        
                        <div id="dataPanel" class="space-y-3">
                            <!-- åŠ¨æ€æ•°æ®å†…å®¹ -->
                        </div>
                        
                        <div class="mt-4 axis-example">
                            <h3 class="font-semibold text-gray-800 mb-2">ğŸ”§ ä»£ç ç¤ºä¾‹</h3>
                            <pre class="text-xs bg-gray-100 p-2 rounded overflow-x-auto" id="codeExample">
# åŸºæœ¬åæ ‡è½´è®¾ç½®
ax = plt.gca()
ax.set_xlabel('Xè½´æ ‡ç­¾')
ax.set_ylabel('Yè½´æ ‡ç­¾')
                            </pre>
                        </div>
                    </div>
                </aside>
            </div>
        </main>

        <!-- é¡µè„š -->
        <footer class="glass-morphism rounded-xl p-4 mt-6 text-white text-center">
            <p class="text-sm opacity-80">ç¬¬å…­ç« ï¼šåæ ‡è½´ | äº¤äº’å¼æ•°æ®å¯è§†åŒ–å¹³å° | åŸºäº Chart.js & Tailwind CSS æ„å»º</p>
        </footer>
    </div>

    <!-- çŸ¥è¯†è¯¦æƒ…æ¨¡æ€æ¡† -->
    <div id="knowledgeModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3 id="modalTitle">æ ‡é¢˜</h3>
            <div id="modalContent">
                <!-- åŠ¨æ€å†…å®¹ -->
            </div>
        </div>
    </div>

    <script>
        // æ•°æ®å®šä¹‰
        const windData = {
            hours: Array.from({length: 24}, (_, i) => `${i}:00`),
            windSpeed: [2.5, 2.8, 2.6, 2.7, 3.1, 3.5, 4.2, 4.8, 5.2, 5.8, 6.2, 6.5, 6.8, 6.9, 6.7, 6.3, 5.8, 5.2, 4.8, 4.3, 3.8, 3.4, 3.0, 2.7],
            avgWindSpeed: 4.6
        };

        const chartInstances = {};
        let autoSwitchInterval;
        let isAutoPlaying = true;
        let showGrid = false;

        // çŸ¥è¯†å†…å®¹å®šä¹‰
        const knowledgeContent = {
            overview: {
                title: 'åæ ‡è½´æ¦‚è¿°',
                content: `
                    <h3>åæ ‡è½´åŸºæœ¬ç»“æ„</h3>
                    <p>matplotlibåæ ‡è½´ç”±ä»¥ä¸‹ä¸»è¦ç»„ä»¶æ„æˆï¼š</p>
                    <ul>
                        <li><strong>è½´è„Š (Spines)</strong>ï¼šåæ ‡è½´çš„å››æ¡è¾¹çº¿</li>
                        <li><strong>åˆ»åº¦ (Ticks)</strong>ï¼šè½´ä¸Šçš„æ ‡è®°çº¿</li>
                        <li><strong>åˆ»åº¦æ ‡ç­¾ (Tick Labels)</strong>ï¼šåˆ»åº¦çš„æ–‡å­—è¯´æ˜</li>
                        <li><strong>è½´æ ‡ç­¾ (Axis Labels)</strong>ï¼šè½´çš„åç§°</li>
                        <li><strong>ç½‘æ ¼çº¿ (Grid)</strong>ï¼šè¾…åŠ©å‚è€ƒçº¿</li>
                    </ul>
                    <p>æ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥ç‹¬ç«‹æ§åˆ¶å’Œå®šåˆ¶ã€‚</p>
                `,
                code: `# è·å–å½“å‰åæ ‡è½´
ax = plt.gca()

# è®¾ç½®è½´æ ‡ç­¾
ax.set_xlabel('Xè½´æ ‡ç­¾', fontsize=12)
ax.set_ylabel('Yè½´æ ‡ç­¾', fontsize=12)

# è®¾ç½®æ ‡é¢˜
ax.set_title('å›¾è¡¨æ ‡é¢˜', fontsize=14)

# æ˜¾ç¤ºç½‘æ ¼
ax.grid(True, alpha=0.3)`
            },
            position: {
                title: 'ä»»æ„ä½ç½®æ·»åŠ åæ ‡è½´',
                content: `
                    <h3>å¤šå­å›¾å¸ƒå±€æŠ€æœ¯</h3>
                    <p>matplotlibæä¾›å¤šç§æ–¹å¼åœ¨ä»»æ„ä½ç½®åˆ›å»ºå­å›¾ï¼š</p>
                    <ul>
                        <li><strong>add_axes()</strong>ï¼šç²¾ç¡®ä½ç½®æ§åˆ¶</li>
                        <li><strong>subplot2grid()</strong>ï¼šç½‘æ ¼å¸ƒå±€</li>
                        <li><strong>gridspec</strong>ï¼šå¤æ‚ç½‘æ ¼å¸ƒå±€</li>
                    </ul>
                    <p>é€šè¿‡åæ ‡ç³»ç»Ÿ [left, bottom, width, height] æ¥ç²¾ç¡®å®šä½ã€‚</p>
                `,
                code: `# åœ¨æŒ‡å®šä½ç½®åˆ›å»ºå­å›¾
ax = fig.add_axes([0.1, 0.1, 0.8, 0.8])

# ä½¿ç”¨ç½‘æ ¼å¸ƒå±€
ax = plt.subplot2grid((3, 3), (0, 0), colspan=2)

# ä½¿ç”¨GridSpec
gs = GridSpec(2, 2)
ax1 = fig.add_subplot(gs[0, 0])
ax2 = fig.add_subplot(gs[0, 1])`
            },
            shenzhen: {
                title: 'æ·±åœ³å¸‚24å°æ—¶å¹³å‡é£é€Ÿåˆ†æ',
                content: `
                    <h3>æ—¶é—´åºåˆ—æ•°æ®å¯è§†åŒ–</h3>
                    <p>æ·±åœ³é£é€Ÿæ•°æ®æ˜¾ç¤ºï¼š</p>
                    <ul>
                        <li>æœ€ä½é£é€Ÿï¼š2.5 m/s (0:00)</li>
                        <li>æœ€é«˜é£é€Ÿï¼š6.9 m/s (14:00)</li>
                        <li>å¹³å‡é£é€Ÿï¼š4.6 m/s</li>
                        <li>å˜åŒ–è¶‹åŠ¿ï¼šæ—©æ™šä½ï¼Œåˆåé«˜</li>
                    </ul>
                    <p>ç¬¦åˆå…¸å‹çš„æµ·é™†é£æ°”å€™ç‰¹å¾ã€‚</p>
                `,
                code: `# åˆ›å»ºæ—¶é—´åºåˆ—å›¾
hours = range(24)
wind_speed = [2.5, 2.8, ..., 2.7]

fig, ax = plt.subplots(figsize=(12, 6))
ax.plot(hours, wind_speed, 'o-', linewidth=2, markersize=6)
ax.set_xlabel('æ—¶é—´ (å°æ—¶)')
ax.set_ylabel('é£é€Ÿ (m/s)')
ax.set_title('æ·±åœ³å¸‚24å°æ—¶å¹³å‡é£é€Ÿ')
ax.grid(True, alpha=0.3)`
            },
            trigonometric: {
                title: 'æ­£å¼¦ä¸ä½™å¼¦æ›²çº¿',
                content: `
                    <h3>ä¸‰è§’å‡½æ•°å›¾åƒç‰¹å¾</h3>
                    <p>æ­£å¼¦å’Œä½™å¼¦å‡½æ•°çš„ç‰¹ç‚¹ï¼š</p>
                    <ul>
                        <li><strong>å‘¨æœŸæ€§</strong>ï¼šå‘¨æœŸä¸º 2Ï€</li>
                        <li><strong>æŒ¯å¹…</strong>ï¼šèŒƒå›´ä¸º [-1, 1]</li>
                        <li><strong>ç›¸ä½å·®</strong>ï¼šcos(x) = sin(x + Ï€/2)</li>
                        <li><strong>å¯¹ç§°æ€§</strong>ï¼šsinä¸ºå¥‡å‡½æ•°ï¼Œcosä¸ºå¶å‡½æ•°</li>
                    </ul>
                    <p>åœ¨æ•°æ®å¯è§†åŒ–ä¸­ç”¨äºæ¨¡æ‹Ÿå‘¨æœŸæ€§å˜åŒ–ã€‚</p>
                `,
                code: `# ç”Ÿæˆä¸‰è§’å‡½æ•°æ•°æ®
x = np.linspace(0, 4*np.pi, 100)
sin_y = np.sin(x)
cos_y = np.cos(x)

fig, ax = plt.subplots()
ax.plot(x, sin_y, 'r-', label='sin(x)')
ax.plot(x, cos_y, 'b-', label='cos(x)')
ax.legend()
ax.grid(True)`
            },
            spine: {
                title: 'è½´è„Šçš„æ§åˆ¶',
                content: `
                    <h3>è½´è„Šå®šåˆ¶æŠ€æœ¯</h3>
                    <p>matplotlibæä¾›ä¸°å¯Œçš„è½´è„Šæ§åˆ¶é€‰é¡¹ï¼š</p>
                    <ul>
                        <li><strong>éšè—è½´è„Š</strong>ï¼šset_visible(False)</li>
                        <li><strong>ç§»åŠ¨è½´è„Š</strong>ï¼šset_position()</li>
                        <li><strong>è®¾ç½®é¢œè‰²</strong>ï¼šset_color()</li>
                        <li><strong>è®¾ç½®çº¿å®½</strong>ï¼šset_linewidth()</li>
                    </ul>
                    <p>é€šè¿‡è½´è„Šæ§åˆ¶å¯ä»¥åˆ›å»ºå„ç§ä¸“ä¸šçš„å›¾è¡¨æ ·å¼ã€‚</p>
                `,
                code: `# éšè—å³ä¾§å’Œé¡¶éƒ¨è½´è„Š
ax.spines['right'].set_visible(False)
ax.spines['top'].set_visible(False)

# ç§»åŠ¨è½´è„Šåˆ°ä¸­å¿ƒ
ax.spines['left'].set_position('center')
ax.spines['bottom'].set_position('center')

# è®¾ç½®è½´è„Šæ ·å¼
ax.spines['left'].set_color('red')
ax.spines['left'].set_linewidth(2)`
            }
        };

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initModule('overview');
            startAutoSwitch();
            initEventListeners();
        });

        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
        function initEventListeners() {
            // æ¨¡å—åˆ‡æ¢
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    const module = this.dataset.module;
                    switchModule(module);
                });
            });

            // æ§åˆ¶æŒ‰é’®
            document.getElementById('exportBtn').addEventListener('click', exportChart);
            document.getElementById('resetBtn').addEventListener('click', resetChart);
            document.getElementById('playBtn').addEventListener('click', toggleAutoSwitch);
            document.getElementById('gridBtn').addEventListener('click', toggleGrid);
            document.getElementById('zoomInBtn').addEventListener('click', () => zoomChart(1.2));
            document.getElementById('zoomOutBtn').addEventListener('click', () => zoomChart(0.8));
            document.getElementById('themeBtn').addEventListener('click', toggleTheme);
            document.getElementById('fullscreenBtn').addEventListener('click', toggleFullscreen);
            
            // æ¨¡æ€æ¡†å…³é—­
            document.querySelector('.close').addEventListener('click', function() {
                document.getElementById('knowledgeModal').style.display = 'none';
            });
        }

        // åˆ‡æ¢æ¨¡å—
        function switchModule(module) {
            // æ›´æ–°å¯¼èˆªçŠ¶æ€
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-module="${module}"]`).classList.add('active');
            
            // æ›´æ–°æ ‡é¢˜
            document.getElementById('chartTitle').textContent = knowledgeContent[module].title;
            
            // æ›´æ–°çŸ¥è¯†é¢æ¿
            updateKnowledgePanel(module);
            
            // æ›´æ–°æ•°æ®é¢æ¿
            updateDataPanel(module);
            
            // æ›´æ–°ä»£ç ç¤ºä¾‹
            updateCodeExample(module);
            
            // åˆå§‹åŒ–å¯¹åº”æ¨¡å—çš„å›¾è¡¨
            initModule(module);
        }

        // æ›´æ–°çŸ¥è¯†é¢æ¿
        function updateKnowledgePanel(module) {
            const panel = document.getElementById('knowledgeContent');
            const knowledge = knowledgeContent[module];
            panel.innerHTML = `
                <div class="bg-white/10 rounded-lg p-3">
                    <h3 class="font-bold mb-2">${knowledge.title}</h3>
                    <div class="text-sm">${knowledge.content}</div>
                </div>
            `;
        }

        // æ›´æ–°æ•°æ®é¢æ¿
        function updateDataPanel(module) {
            const panel = document.getElementById('dataPanel');
            let content = '';
            
            switch(module) {
                case 'shenzhen':
                    content = `
                        <div class="bg-white/10 rounded-lg p-3">
                            <h4 class="font-semibold mb-2">ğŸ“Š é£é€Ÿç»Ÿè®¡</h4>
                            <div class="text-sm space-y-1">
                                <p>å¹³å‡é£é€Ÿ: ${windData.avgWindSpeed} m/s</p>
                                <p>æœ€é«˜é£é€Ÿ: ${Math.max(...windData.windSpeed)} m/s</p>
                                <p>æœ€ä½é£é€Ÿ: ${Math.min(...windData.windSpeed)} m/s</p>
                                <p>é£é€Ÿæå·®: ${(Math.max(...windData.windSpeed) - Math.min(...windData.windSpeed)).toFixed(1)} m/s</p>
                            </div>
                        </div>
                        <div class="bg-white/10 rounded-lg p-3">
                            <h4 class="font-semibold mb-2">ğŸ• å³°å€¼æ—¶æ®µ</h4>
                            <div class="text-sm space-y-1">
                                <p>æœ€é«˜: ${windData.hours[windData.windSpeed.indexOf(Math.max(...windData.windSpeed))]}</p>
                                <p>æœ€ä½: ${windData.hours[windData.windSpeed.indexOf(Math.min(...windData.windSpeed))]}</p>
                            </div>
                        </div>
                    `;
                    break;
                case 'trigonometric':
                    content = `
                        <div class="bg-white/10 rounded-lg p-3">
                            <h4 class="font-semibold mb-2">ğŸ“ å‡½æ•°ç‰¹å¾</h4>
                            <div class="text-sm space-y-1">
                                <p>å‘¨æœŸ: 2Ï€</p>
                                <p>æŒ¯å¹…: 1</p>
                                <p>ç›¸ä½å·®: Ï€/2</p>
                                <p>å¯¹ç§°æ€§: sin(å¥‡), cos(å¶)</p>
                            </div>
                        </div>
                        <div class="bg-white/10 rounded-lg p-3">
                            <h4 class="font-semibold mb-2">ğŸ” ç‰¹æ®Šå€¼</h4>
                            <div class="text-sm space-y-1">
                                <p>sin(0) = 0, sin(Ï€/2) = 1</p>
                                <p>cos(0) = 1, cos(Ï€/2) = 0</p>
                            </div>
                        </div>
                    `;
                    break;
                default:
                    content = `
                        <div class="bg-white/10 rounded-lg p-3">
                            <h4 class="font-semibold mb-2">ğŸ’¡ æç¤º</h4>
                            <p class="text-sm">åˆ‡æ¢ä¸åŒçš„æ¨¡å—æŸ¥çœ‹ç›¸åº”çš„æ•°æ®åˆ†æå†…å®¹ã€‚</p>
                        </div>
                    `;
            }
            
            panel.innerHTML = content;
        }

        // æ›´æ–°ä»£ç ç¤ºä¾‹
        function updateCodeExample(module) {
            const codeElement = document.getElementById('codeExample');
            codeElement.textContent = knowledgeContent[module].code;
        }

        // åˆå§‹åŒ–æ¨¡å—
        function initModule(module) {
            // é”€æ¯ç°æœ‰å›¾è¡¨
            if (chartInstances.main) {
                chartInstances.main.destroy();
            }

            switch(module) {
                case 'overview':
                    initOverviewChart();
                    break;
                case 'position':
                    initPositionChart();
                    break;
                case 'shenzhen':
                    initShenzhenChart();
                    break;
                case 'trigonometric':
                    initTrigonometricChart();
                    break;
                case 'spine':
                    initSpineChart();
                    break;
            }
        }

        // åˆå§‹åŒ–åæ ‡è½´æ¦‚è¿°å›¾è¡¨
        function initOverviewChart() {
            const ctx = document.getElementById('mainChart').getContext('2d');
            
            // åˆ›å»ºåæ ‡è½´ç»“æ„ç¤ºæ„å›¾
            const data = {
                datasets: [{
                    label: 'åæ ‡è½´ç»“æ„',
                    data: [
                        {x: -5, y: 0}, {x: 5, y: 0}, // Xè½´
                        {x: 0, y: -3}, {x: 0, y: 3}  // Yè½´
                    ],
                    borderColor: 'rgb(75, 192, 192)',
                    borderWidth: 2,
                    showLine: true,
                    pointRadius: 0
                }, {
                    label: 'åˆ»åº¦',
                    data: [
                        {x: -4, y: 0}, {x: -2, y: 0}, {x: 2, y: 0}, {x: 4, y: 0},
                        {x: 0, y: -2}, {x: 0, y: -1}, {x: 0, y: 1}, {x: 0, y: 2}
                    ],
                    backgroundColor: 'rgb(255, 99, 132)',
                    pointRadius: 4
                }, {
                    label: 'ç¤ºä¾‹æ•°æ®ç‚¹',
                    data: [
                        {x: -3, y: 2}, {x: -1, y: -1.5}, {x: 1.5, y: 1.8}, {x: 3, y: -0.5}
                    ],
                    backgroundColor: 'rgb(54, 162, 235)',
                    pointRadius: 6,
                    pointStyle: 'circle'
                }]
            };

            chartInstances.main = new Chart(ctx, {
                type: 'scatter',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'åæ ‡è½´åŸºæœ¬ç»“æ„ç¤ºæ„å›¾',
                            font: { size: 16 }
                        },
                        legend: {
                            display: true,
                            position: 'bottom'
                        }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'center',
                            min: -6,
                            max: 6,
                            title: {
                                display: true,
                                text: 'Xè½´'
                            },
                            grid: {
                                display: showGrid,
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        y: {
                            type: 'linear',
                            position: 'center',
                            min: -4,
                            max: 4,
                            title: {
                                display: true,
                                text: 'Yè½´'
                            },
                            grid: {
                                display: showGrid,
                                color: 'rgba(0,0,0,0.1)'
                            }
                        }
                    }
                }
            });
        }

        // åˆå§‹åŒ–ä»»æ„ä½ç½®åæ ‡è½´å›¾è¡¨
        function initPositionChart() {
            const ctx = document.getElementById('mainChart').getContext('2d');
            
            // åˆ›å»ºå¤šä¸ªå­å›¾çš„ç¤ºä¾‹æ•°æ®
            const datasets = [];
            const positions = [
                { label: 'å·¦ä¸Š', data: Array.from({length: 8}, () => Math.random() * 50 + 10), color: 'rgb(255, 99, 132)' },
                { label: 'å³ä¸Š', data: Array.from({length: 8}, () => Math.random() * 40 + 20), color: 'rgb(54, 162, 235)' },
                { label: 'å·¦ä¸‹', data: Array.from({length: 8}, () => Math.random() * 60 + 15), color: 'rgb(255, 205, 86)' },
                { label: 'å³ä¸‹', data: Array.from({length: 8}, () => Math.random() * 45 + 25), color: 'rgb(75, 192, 192)' },
                { label: 'ä¸­å¿ƒ', data: Array.from({length: 8}, () => Math.random() * 55 + 30), color: 'rgb(153, 102, 255)' }
            ];

            positions.forEach((pos, index) => {
                datasets.push({
                    label: pos.label,
                    data: pos.data,
                    borderColor: pos.color,
                    backgroundColor: pos.color.replace('rgb', 'rgba').replace(')', ', 0.2)'),
                    tension: 0.4
                });
            });

            chartInstances.main = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 8}, (_, i) => `T${i+1}`),
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'å¤šä¸ªä½ç½®å­å›¾æ•°æ®å±•ç¤º',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'æ—¶é—´ç‚¹'
                            },
                            grid: {
                                display: showGrid
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'æ•°å€¼'
                            },
                            grid: {
                                display: showGrid
                            }
                        }
                    }
                }
            });
        }

        // åˆå§‹åŒ–æ·±åœ³é£é€Ÿå›¾è¡¨
        function initShenzhenChart() {
            const ctx = document.getElementById('mainChart').getContext('2d');
            
            chartInstances.main = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: windData.hours,
                    datasets: [{
                        label: 'é£é€Ÿ (m/s)',
                        data: windData.windSpeed,
                        borderColor: 'rgb(75, 192, 192)',
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'å¹³å‡é£é€Ÿ',
                        data: Array(24).fill(windData.avgWindSpeed),
                        borderColor: 'rgb(255, 99, 132)',
                        borderDash: [5, 5],
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'æ·±åœ³å¸‚24å°æ—¶å¹³å‡é£é€Ÿå˜åŒ–',
                            font: { size: 16 }
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'æ—¶é—´'
                            },
                            grid: {
                                display: showGrid
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'é£é€Ÿ (m/s)'
                            },
                            beginAtZero: true,
                            grid: {
                                display: showGrid
                            }
                        }
                    }
                }
            });
        }

        // åˆå§‹åŒ–ä¸‰è§’å‡½æ•°å›¾è¡¨
        function initTrigonometricChart() {
            const ctx = document.getElementById('mainChart').getContext('2d');
            
            const xValues = Array.from({length: 100}, (_, i) => (i / 100) * 4 * Math.PI);
            const sinValues = xValues.map(x => Math.sin(x));
            const cosValues = xValues.map(x => Math.cos(x));

            chartInstances.main = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: xValues.map(x => (x / Math.PI).toFixed(2) + 'Ï€'),
                    datasets: [{
                        label: 'sin(x)',
                        data: sinValues,
                        borderColor: 'rgb(255, 99, 132)',
                        backgroundColor: 'rgba(255, 99, 132, 0.1)',
                        tension: 0.4
                    }, {
                        label: 'cos(x)',
                        data: cosValues,
                        borderColor: 'rgb(54, 162, 235)',
                        backgroundColor: 'rgba(54, 162, 235, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'æ­£å¼¦ä¸ä½™å¼¦å‡½æ•°å›¾åƒ',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'x (å¼§åº¦)'
                            },
                            grid: {
                                display: showGrid
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'å‡½æ•°å€¼'
                            },
                            min: -1.5,
                            max: 1.5,
                            grid: {
                                display: showGrid
                            }
                        }
                    }
                }
            });
        }

        // åˆå§‹åŒ–è½´è„Šæ§åˆ¶å›¾è¡¨
        function initSpineChart() {
            const ctx = document.getElementById('mainChart').getContext('2d');
            
            const sampleData = Array.from({length: 20}, (_, i) => ({
                x: i,
                y: Math.sin(i/3) * 50 + Math.random() * 20 + 50
            }));

            chartInstances.main = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: sampleData.map(d => d.x),
                    datasets: [{
                        label: 'è½´è„Šæ¼”ç¤ºæ•°æ®',
                        data: sampleData.map(d => d.y),
                        borderColor: 'rgb(75, 192, 192)',
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'è½´è„Šæ§åˆ¶æ¼”ç¤º',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Xè½´ - å¯è°ƒæ•´è½´è„Š'
                            },
                            grid: {
                                display: showGrid
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Yè½´ - å¯è°ƒæ•´è½´è„Š'
                            },
                            grid: {
                                display: showGrid
                            }
                        }
                    }
                }
            });
        }

        // å¯¼å‡ºå›¾è¡¨
        function exportChart() {
            if (chartInstances.main) {
                const url = chartInstances.main.toBase64Image();
                const link = document.createElement('a');
                const currentModule = document.querySelector('.nav-item.active').dataset.module;
                link.download = `chapter6_${currentModule}.png`;
                link.href = url;
                link.click();
            }
        }

        // é‡ç½®å›¾è¡¨
        function resetChart() {
            const currentModule = document.querySelector('.nav-item.active').dataset.module;
            initModule(currentModule);
        }

        // è‡ªåŠ¨åˆ‡æ¢
        function startAutoSwitch() {
            const modules = ['overview', 'position', 'shenzhen', 'trigonometric', 'spine'];
            let currentIndex = 0;

            autoSwitchInterval = setInterval(() => {
                if (isAutoPlaying) {
                    currentIndex = (currentIndex + 1) % modules.length;
                    switchModule(modules[currentIndex]);
                }
            }, 5000);
        }

        function toggleAutoSwitch() {
            isAutoPlaying = !isAutoPlaying;
            const btn = document.getElementById('playBtn');
            btn.textContent = isAutoPlaying ? 'â¸ï¸ æš‚åœåˆ‡æ¢' : 'â–¶ï¸ è‡ªåŠ¨åˆ‡æ¢';
        }

        // åˆ‡æ¢ç½‘æ ¼
        function toggleGrid() {
            showGrid = !showGrid;
            const btn = document.getElementById('gridBtn');
            btn.textContent = showGrid ? 'ğŸ“ éšè—ç½‘æ ¼' : 'ğŸ“ æ˜¾ç¤ºç½‘æ ¼';
            btn.classList.toggle('active');
            resetChart();
        }

        // ç¼©æ”¾å›¾è¡¨
        function zoomChart(factor) {
            if (chartInstances.main) {
                chartInstances.main.zoom(factor);
            }
        }

        // åˆ‡æ¢ä¸»é¢˜
        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
            const btn = document.getElementById('themeBtn');
            btn.textContent = document.body.classList.contains('dark-theme') ? 'â˜€ï¸' : 'ğŸŒ™';
            btn.title = document.body.classList.contains('dark-theme') ? 'åˆ‡æ¢åˆ°æµ…è‰²ä¸»é¢˜' : 'åˆ‡æ¢åˆ°æ·±è‰²ä¸»é¢˜';
        }

        // å…¨å±åŠŸèƒ½
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
                document.getElementById('fullscreenBtn').textContent = 'ğŸ”² é€€å‡ºå…¨å±';
            } else {
                document.exitFullscreen();
                document.getElementById('fullscreenBtn').textContent = 'ğŸ”³ å…¨å±';
            }
        }
    </script>
</body>
</html>